<html>
  <head>

  <meta charset="UTF-8" name="description" content="[moneyflow]">

  <title>EU-vaaliehdokkaiden rahoitus</title>

  <script type="text/javascript" src="jquery-2.1.1.js" charset="utf-8" ></script>

  <script type="text/javascript" src="cytoscape/cytoscape.min.js"></script>

  <script type="text/javascript" src="jquery.qtip-2.2.1.js"></script>
  <link rel="stylesheet" type="text/css" href="jquery.qtip.css" />

  <script type="text/javascript" src="cytoscape/cytoscape.js-panzoom-master/cytoscape.js-panzoom.js"></script>

  <script type="text/javascript" src="cytoscape/cytoscape-qtip.js"></script>

        <script type="text/javascript" src="taffy.js"></script>
        <script type="text/javascript" src="data.js"></script>


  <link rel="stylesheet" type="text/css" href="cytoscape/cytoscape.js-panzoom-master/cytoscape.js-panzoom.css">
  <link rel="stylesheet" type="text/css" href="cytoscape/cytoscape.js-panzoom-master/font-awesome-4.0.3/css/font-awesome.min.css">




  <script type="text/javascript" >
  var fundingtypes = ['ownFunding', 'lentFunding', 'personFunding', 'corporateFunding', 'partyFunding', 'partyAssociationFunding', 'otherFunding'];

  $(function(){

    var fundingcolors = {
     'ownFunding' : '#E8747C',
     'lentFunding' : '#74CBE8',
     'personFunding' : '#74E883',
     'corporateFunding' : '#F8747C',
     'partyFunding' : '#7FCBE8',
     'partyAssociationFunding' : '#74F883',
     'otherFunding' :  '#E87F7C'
    }


    var cy = cytoscape({

    container: document.getElementById('cy'),

    layout:{
     name: 'circle',
     concentric: function(){ return this.data('weight'); },

     levelWidth: function( nodes ){ return 1; },
     padding: 10,
     minNodeSpacing: 100,
     counterclockwise: true
    },

    ready: function(){
     window.cy = this;
    },

    animate:{
      pan: { 
       x: 100,
       y: 100 
      },
      zoom: 2
    },

    style: cytoscape.stylesheet()
      .selector('node')
        .css({
          'width': 'mapData(radius, 0, 100, 20, 120)',
          'height': 'mapData(radius, 0, 100, 20, 120)',
          'content':'data(label)',
          'text-valign':'top',
          'text-outline-width': 2,

          'pie-1-background-color': '#E8747C', // own funding
          'pie-2-background-color': '#74CBE8', // lent funding
          'pie-3-background-color': '#74E883', // person funding
          'pie-4-background-color': '#F8747C', // corporate funding
          'pie-5-background-color': '#7FCBE8', // party funding
          'pie-6-background-color': '#74F883', // party association funding
          'pie-7-background-color': '#E87F7C', // other funding

          'pie-1-background-size': 'mapData(Pietikainen_n, 0, 100, 0, 100)',
          'pie-2-background-size': 'mapData(Ireland_n, 0, 100, 0, 100)',
          'pie-3-background-size': 'mapData(Cayman_n, 0, 100, 0, 100)',
          'pie-4-background-size': 'mapData(Bermuda_n, 0, 100, 0, 100)',
          'pie-5-background-size': 'mapData(Guernsey_n, 0, 100, 0, 100)',
          'pie-6-background-size': 'mapData(Virgins_n, 0, 100, 0, 100)',
          'pie-7-background-size': 'mapData(Jersey_n, 0, 100, 0, 100)',
          'pie-8-background-size': 'mapData(Bahama_n, 0, 100, 0, 100)',
          'pie-9-background-size': 'mapData(HongKong_n, 0, 100, 0, 100)',


   'font-size': 50
   })
  .selector(':selected')
   .css({
    'border-width': 3,
    'border-color':'#fff'   
   })
  .selector('edge')
   .css({
    'opacity': 1,
    'width': 'mapData(strength, 0, 100, 0, 50)',
    'target-arrow-shape': 'none',
    'source-arrow-shape': 'none',
    'line-color': '#000000',
    'source-arrow-color': '#000',
    'target-arrow-color': '#000',    
   })   
  .selector('node[party="KOK"]')
   .css({   
    'background-color': '#0000FF'  
    })
  .selector('node[party="PS"]')
   .css({   
    'background-color': '#663300'})
  .selector('node[party="KESK"]')
   .css({   
    'background-color': '#006600'})
  .selector('node[party="SDP"]')
   .css({   
    'background-color': '#FF0000'})
  .selector('node[party="RKP"]')
   .css({   
    'background-color': '#0099FF'})
  .selector('node[party="VAS"]')
   .css({   
    'background-color': '#CC0000'})
  .selector('node[party="VIHR"]')
   .css({   
    'background-color': '#00CC00'})
  .selector('node[party="KD"]')
   .css({   
    'background-color': '#FF00FF'}),


   elements:{
// cy.add(JSON.stringify(nodes)),

    nodes:
    [
     {data:
       {id:'Pietikainen', number: 0, label:'Sirpa Pietikäinen',radius:100, weight:5, party: 'KOK',
        ownFunding: 49147.98,
        lentFunding: 60000,
        personFunding: 6558,
        corporateFunding: 33382,
        partyFunding: 0,
        partyAssociationFunding: 5401.21,
        otherFunding: 29212,
        homepage: "http://www.sirpapietikainen.net",
        picture: "meppics/40599.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/40599/SIRPA_PIETIKAINEN_home.html"
        }},
     {data:        
       {id:'Sarvamaa', number: 1, label:'Petri Sarvamaa',radius:25.16, weight:5, party: 'KOK',
        ownFunding: 12680.49,
        lentFunding: 0,
        personFunding: 17007,
        corporateFunding: 10320,
        partyFunding: 0,
        partyAssociationFunding: 0,
        otherFunding: 6210,
        homepage: "http://petrisarvamaa.eu",
        picture: "meppics/112611.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/112611/PETRI_SARVAMAA_home.html"
        }},

     {data:        
       {id:'Stubb', number: 2, label:'Alexander Stubb',radius:68.96, weight:5, party: 'KOK',
        ownFunding: 0,
        lentFunding: 0,
        personFunding: 59574,
        corporateFunding: 62800,
        partyFunding: 0,
        partyAssociationFunding: 0,
        otherFunding: 4300,
        homepage: "",
        euHomepage: "http://www.alexstubb.com"
        }},

     {data:        
       {id:'Virkkunen', number: 3, label:'Henna Virkkunen',radius:50, weight:5, party: 'KOK',
        ownFunding: 45417.27,
        lentFunding: 0,
        personFunding: 17399,
        corporateFunding: 23150,
        partyFunding: 0,
        partyAssociationFunding: 5891,
        otherFunding: 0,
        homepage: "http://www.hennavirkkunen.fi",
        picture: "meppics/124726.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/124726/HENNA_VIRKKUNEN_home.html"
        }},

     {data:        
       {id:'Halla-aho', number: 4, label:'Jussi Halla-aho',radius:2.21, weight:5, party: 'PS',
        ownFunding: 0,
        lentFunding: 0,
        personFunding: 0,
        corporateFunding: 0,
        partyFunding: 4055.61,
        partyAssociationFunding: 0,
        otherFunding:0,
        homepage: "http://www.halla-aho.com/jussi",
        picture: "meppics/124727.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/124727/JUSSI_HALLA-AHO_home.html"
        }},

     {data:        
       {id:'Ruohonen-Lerner', number: 5, label:'Pirkko Ruohonen-Lerner',radius:11.78, weight:5, party: 'PS',
        ownFunding: 10534.83,
        lentFunding: 0,
        personFunding: 0,
        corporateFunding: 0,
        partyFunding: 10000,
        partyAssociationFunding: 0,
        otherFunding:0,
        homepage: "",
        euHomepage: "http://www.pirkon.info"
        }},

     {data:        
       {id:'Terho', number: 6, label:'Sampo Terho',radius:16.38, weight:5, party: 'PS',
        ownFunding: 18767.54,
        lentFunding: 0,
        personFunding: 1330,
        corporateFunding: 0,
        partyFunding: 10000,
        partyAssociationFunding: 0,
        otherFunding:0,
        homepage: "http://www.sampoterho.net",
        picture: "meppics/107385.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/107385/SAMPO_TERHO_home.html"
        }},

     {data:        
       {id:'Jaatteenmaki', number: 7, label:'Anneli Jäätteenmäki',radius:32.19, weight:5, party: 'KESK',
        ownFunding: 5013,
        lentFunding: 0,
        personFunding: 16475.17,
        corporateFunding: 0,
        partyFunding: 5000,
        partyAssociationFunding: 32640.85,
        otherFunding: 0,
        homepage: "http://www.annelijaatteenmaki.net",
        picture: "meppics/28314.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/28314/ANNELI_JAATTEENMAKI_home.html"
        }},

     {data:        
       {id:'Rehn', number: 8, label:'Olli Rehn',radius: 79.18, weight:5, party: 'KESK',
        ownFunding: 35001,
        lentFunding: 0,
        personFunding: 29861,
        corporateFunding: 48250,
        partyFunding: 5000,
        partyAssociationFunding: 0,
        otherFunding: 27350,
        homepage: "", // no homepage?
        picture: "meppics/2119.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/2119/OLLI_REHN_home.html"
        }},

     {data:        
       {id:'Takkula', number: 9, label:'Hannu Takkula',radius:59.16, weight:5, party: 'KESK',
        ownFunding: 6127.02,
        lentFunding: 70000,
        personFunding: 11057.50,
        corporateFunding: 16500.77,
        partyFunding: 5000,
        partyAssociationFunding: 0,
        otherFunding:0,
        homepage: "http://www.hannutakkula.fi",
        euHomepage: ""
        }},

     {data:        
       {id:'Vayrynen', number: 10, label:'Paavo Väyrynen',radius:50.44, weight:5, party: 'KESK',
        ownFunding: 29111,
        lentFunding: 0,
        personFunding: 0,
        corporateFunding: 0,
        partyFunding: 5000,
        partyAssociationFunding: 0,
        otherFunding: 58542,
        homepage: "http://www.vayrynen.com",
        picture: "meppics/2128.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/2128/PAAVO_VAYRYNEN_home.html"
        }},

     {data:        
       {id:'Gestrin', number: 11, label:'Christina Gestrin',radius:46.50, weight:5, party: 'RKP',
        ownFunding: 9316,
        lentFunding: 0,
        personFunding: 16899,
        corporateFunding: 9130,
        partyFunding: 10000,
        partyAssociationFunding: 800,
        otherFunding: 39230,
        homepage: "http://www.gestrin.fi",
        euHomepage: ""
        }},

     {data:        
       {id:'Torvalds', number: 12, label:'Nils Torvalds',radius:26.98, weight:5, party: 'RKP',
        ownFunding: 8500,
        lentFunding: 0,
        personFunding: 13067,
        corporateFunding: 0,
        partyFunding: 10000,
        partyAssociationFunding: 0,
        otherFunding: 18000,
        homepage: "http://www.nilstorvalds.fi",
        picture: "meppics/114268.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/114268/NILS_TORVALDS_home.html"
        }},

     {data:        
       {id:'Harakka', number: 13, label:'Timo Harakka',radius:39.46, weight:5, party: 'SDP',
        ownFunding: 11128.56,
        lentFunding: 0,
        personFunding: 4165.85,
        corporateFunding: 740,
        partyFunding: 4000,
        partyAssociationFunding: 24144,
        otherFunding: 28305.90,
        homepage: "http://www.timoharakka.fi",
        euHomepage: ""
        }},

     {data:        
       {id:'Jaakonsaari', number: 14, label:'Liisa Jaakonsaari',radius:36.41, weight:5, party: 'SDP',
        ownFunding: 31630,
        lentFunding: 0,
        personFunding: 4409,
        corporateFunding: 0,
        partyFunding: 4000,
        partyAssociationFunding: 17050,
        otherFunding: 9800,
        homepage: "http://liisajaakonsaari.fi",
        picture: "meppics/96684.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/96684/LIISA_JAAKONSAARI_home.html"
        }},

     {data:        
       {id:'Kumpula-Natri', number: 15, label:'Miapetra Kumpula-Natri',radius: 47.56, weight:5, party: 'SDP',
        ownFunding: 3313.58,
        lentFunding: 0,
        personFunding: 5948,
        corporateFunding: 18050,
        partyFunding: 4000,
        partyAssociationFunding: 2500,
        otherFunding: 53556.03,
        homepage: "http://www.miapetra.fi",
        picture: "meppics/124735.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/124735/MIAPETRA_KUMPULA-NATRI_home.html"
        }},

     {data:        
       {id:'Andersson', number: 16, label:'Li Andersson',radius: 19.42, weight:5, party: 'VAS',
        ownFunding: 2000,
        lentFunding: 0,
        personFunding: 17669.88,
        corporateFunding: 0,
        partyFunding: 1000,
        partyAssociationFunding: 8000,
        otherFunding: 7000,
        homepage: "",
        euHomepage: "http://www.liandersson.fi"
        }},

     {data:        
       {id:'Kyllonen', number: 17, label:'Merja Kyllönen',radius: 6.85, weight:5, party: 'VAS',
        ownFunding: 3780.56,
        lentFunding: 0,
        personFunding: 1161,
        corporateFunding: 0,
        partyFunding: 1000,
        partyAssociationFunding: 3650,
        otherFunding: 3000,
        homepage: "http://www.merjakyllonen.fi",
        picture: "meppics/124736.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/124736/MERJA_KYLLONEN_home.html"
        }},

     {data:        
       {id:'Hautala', number: 18, label:'Heidi Hautala',radius: 5.48, weight:5, party: 'VIHR',
        ownFunding: 3703.42,
        lentFunding: 0,
        personFunding: 2868.15,
        corporateFunding: 0,
        partyFunding: 3500,
        partyAssociationFunding: 0,
        otherFunding:0,
        homepage: "http://www.heidihautala.fi",
        picture: "meppics/2054.jpg",
        euHomepage: "http://www.europarl.europa.eu/meps/fi/2054/HEIDI_HAUTALA_home.html"
        }},


     {data:        
       {id:'Tynkkynen', number: 19, label:'Oras Tynkkynen',radius:25.26, weight:5, party: 'VIHR',
        ownFunding: 20030.46,
        lentFunding: 0,
        personFunding: 20668.40,
        corporateFunding: 0,
        partyFunding: 3500,
        partyAssociationFunding: 2207.18,
        otherFunding:0,
        homepage: "http://www.orastynkkynen.fi",
        euHomepage: ""
        }}
//} // data
], // nodes

    edges:[
     {data:{id: 'edgeA', source:'Halla-aho', target:'Ruohonen-Lerner', strength:10, sponsor: 'Perussuomalaiset rp'}},
     {data:{id: 'edgeB', source:'Halla-aho', target:'Terho', strength:10, sponsor: 'Perussuomalaiset rp'}},
     {data:{id: 'edgeC', source:'Terho', target:'Ruohonen-Lerner', strength:10, sponsor: 'Perussuomalaiset rp'}},

     {data:{id: 'edgeD', source:'Jaatteenmaki', target:'Rehn', strength:10, sponsor: 'Suomen Keskusta rp'}},
     {data:{id: 'edgeE', source:'Jaatteenmaki', target:'Takkula', strength:10, sponsor: 'Suomen Keskusta rp'}},
     {data:{id: 'edgeF', source:'Jaatteenmaki', target:'Vayrynen', strength:10, sponsor: 'Suomen Keskusta rp'}},
     {data:{id: 'edgeG', source:'Rehn', target:'Takkula', strength:10, sponsor: 'Suomen Keskusta rp'}},
     {data:{id: 'edgeH', source:'Rehn', target:'Vayrynen', strength:10, sponsor: 'Suomen Keskusta rp'}},
     {data:{id: 'edgeI', source:'Takkula', target:'Vayrynen', strength:10, sponsor: 'Suomen Keskusta rp'}},

     {data:{id: 'edgeJ', source:'Gestrin', target:'Torvalds', strength:10, sponsor: 'Svenska folkpartiet i Finland rp'}},

     {data:{id: 'edgeK', source:'Harakka', target:'Jaakonsaari', strength:10, sponsor: 'Suomen Sosialidemokraattinen Puolue rp'}},
     {data:{id: 'edgeL', source:'Harakka', target:'Kumpula-Natri', strength:10, sponsor: 'Suomen Sosialidemokraattinen Puolue rp'}},
     {data:{id: 'edgeM', source:'Jaakonsaari', target:'Kumpula-Natri', strength:10, sponsor: 'Suomen Sosialidemokraattinen Puolue rp'}},

     {data:{id: 'edgeN', source:'Hautala', target:'Tynkkynen', strength:10, sponsor: 'Vihreä liitto rp'}},

     {data:{id: 'edgeO', source:'Pietikainen', target:'Harakka', strength:10, sponsor: 'TEAM'}},
     {data:{id: 'edgeP', source:'Harakka', target:'Jaakonsaari', strength:10, sponsor: 'Ammattiliittor Pro ry'}}
]


} // elements
});


/*
  .selector('node[*]').qtip
   .css({
   'backgroundColor': 'blue'
  }),
  */
/*
cy.$('*').qtip({
style: {classes: 'qtip-rounded'}
//style: {classes: 'qtip-bootstrap'}
});
*/




cy.$('#Pietikainen').qtip({
prerender: true,
/*style: {classes: 'qtip-bootstrap'},*/
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Pietikainen']").data());}
}); // qtip

cy.$('#Sarvamaa').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Sarvamaa']").data());}
}); // qtip

cy.$('#Stubb').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Stubb']").data());}
}); // qtip


cy.$('#Virkkunen').qtip({
prerender: true,
show: { ready: true, event: 'mouseover'},
hide: { event: 'mouseout'},
//hide: {event: false}, // keeping tooltip visible after mouseout
content: function(){ return toolTipContent(cy.nodes("[id='Virkkunen']").data());}
}); // qtip


cy.$('#Halla-aho').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Halla-aho']").data());}
}); // qtip

cy.$('#Ruohonen-Lerner').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Ruohonen-Lerner']").data());}
}); // qtip

cy.$('#Terho').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Terho']").data());}
}); // qtip

cy.$('#Jaatteenmaki').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Jaatteenmaki']").data());}
}); // qtip

cy.$('#Rehn').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Rehn']").data());}
}); // qtip

cy.$('#Takkula').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Takkula']").data());}
}); // qtip

cy.$('#Vayrynen').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Vayrynen']").data());}
}); // qtip

cy.$('#Gestrin').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Gestrin']").data());}
}); // qtip
cy.$('#Gestrin').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Gestrin']").data());}
}); // qtip
cy.$('#Torvalds').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Torvalds']").data());}
}); // qtip

cy.$('#Harakka').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Harakka']").data());}
}); // qtip

cy.$('#Jaakonsaari').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Jaakonsaari']").data());}
}); // qtip
cy.$('#Kumpula-Natri').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Kumpula-Natri']").data());}
}); // qtip

cy.$('#Andersson').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Andersson']").data());}
}); // qtip


cy.$('#Kyllonen').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Kyllonen']").data());}
}); // qtip

cy.$('#Hautala').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Hautala']").data());}
}); // qtip

cy.$('#Tynkkynen').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: function(){ return toolTipContent(cy.nodes("[id='Tynkkynen']").data());}
}); // qtip


cy.$('#edgeA').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeA']").data().sponsor
}); // qtip

cy.$('#edgeB').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeB']").data().sponsor
}); // qtip

cy.$('#edgeC').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeC']").data().sponsor
}); // qtip

cy.$('#edgeD').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeD']").data().sponsor
}); // qtip

cy.$('#edgeE').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeE']").data().sponsor
}); // qtip

cy.$('#edgeF').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeF']").data().sponsor
}); // qtip

cy.$('#edgeG').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeG']").data().sponsor
}); // qtip

cy.$('#edgeH').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeH']").data().sponsor
}); // qtip

cy.$('#edgeI').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeI']").data().sponsor
}); // qtip

cy.$('#edgeJ').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeJ']").data().sponsor
}); // qtip

cy.$('#edgeK').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeK']").data().sponsor
}); // qtip

cy.$('#edgeL').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeL']").data().sponsor
}); // qtip

cy.$('#edgeM').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeM']").data().sponsor
}); // qtip

cy.$('#edgeN').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeN']").data().sponsor
}); // qtip

cy.$('#edgeO').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeO']").data().sponsor
}); // qtip

cy.$('#edgeP').qtip({
prerender: true,
show: { ready: true, event: 'mouseover' },
hide: { event: 'mouseout'},
content: cy.edges("[id='edgeP']").data().sponsor
}); // qtip


/*
     'ownFunding' : '#E8747C',
     'lentFunding' : '#74CBE8',
     'personFunding' : '#74E883',
     'corporateFunding' : '#F8747C',
     'partyFunding' : '#7FCBE8',
     'partyAssociationFunding' : '#74F883',
     'otherFunding' :  '#E87F7C'
*/

function toolTipContent(j){

  var content = document.createElement("div");
  content.className = "tooltipcontent";

  var leftcolumn = document.createElement("div");
  leftcolumn.className = "leftcolumn";
  leftcolumn.setAttribute("float", "left");
  leftcolumn.setAttribute("width", "50px");
  content.appendChild(leftcolumn);
  
  var img = document.createElement("img");
  img.setAttribute("src", j.picture);
  img.setAttribute("width", "60px");
  leftcolumn.appendChild(img);

  var name = document.createElement("div");
  name.className = "name";
  name.innerHTML = j.label;
  leftcolumn.appendChild(name);

  var party = document.createElement("div");
  party.className = "party";
  party.innerHTML = j.party;
  leftcolumn.appendChild(party);
  
  var rightcolumn = document.createElement("div");
  rightcolumn.className = "rightcolumn";
  rightcolumn.setAttribute("float", "right");
  rightcolumn.setAttribute("width", "300px");
  rightcolumn.setAttribute("margin-left", "60px");
  
  var funding = listFundingSources(j);
  rightcolumn.appendChild(funding);

  var button = document.createElement("button");
  button.setAttribute("type", "button");

  button.setAttribute("onClick", "more(this.id);");
  
//  var c = false;

//  button.onclick = more(i);
  
  button.innerHTML = "Lisätietoja";
  rightcolumn.appendChild(button);
  content.appendChild(rightcolumn);

  return content;
//  return listFundingSources(j);

}


function listFundingSources(j){
//  var fundingtypes = ['ownFunding', 'lentFunding', 'personFunding', 'corporateFunding', 'partyFunding', 'partyAssociationFunding', 'otherFunding'];
  var fundinglabels = {'ownFunding': 'Omia varoja: ', 
                    'lentFunding': 'Ehdokkaan ja tukiryhmän ottamia lainoja: ', 
                    'personFunding': 'Yksityishenkilöiltä saatu tuki: ',
                    'corporateFunding': 'Yrityksiltä saatu tuki: ', 
                    'partyFunding': 'Puolueelta saatu tuki: ', 
                    'partyAssociationFunding': 'Puolueyhdistyksiltä saatu tuki: ', 
                    'otherFunding': 'Muilta tahoilta saatu tuki: '}

  var ul = document.createElement("ul");

// http://stackoverflow.com/questions/684672/loop-through-javascript-object
  for (var key in j) {

    if($.inArray(key, fundingtypes) > -1.0){
//console.log(key + " -> " + j[key]);

      var li = document.createElement("li");
      var attr = document.createElement("div");
      attr.className=key; // da problem !!!
      attr.innerHTML = fundinglabels[key] + " " + j[key].toLocaleString("fi-FI") + " euroa";
      li.appendChild(attr);
      ul.appendChild(li);

    }
  }// for

  var a = getTotalCandidateFunding(j);
  var li = document.createElement("li");
  li.innerHTML = "<strong>" + "Yhteensä: " + "</strong>" + a + " euroa";
  ul.appendChild(li);

  return ul;
} // listFundingSources

function getTotalCandidateFunding(j){
  var sum = 0;
  for (var key in j) {
    if($.inArray(key, fundingtypes) > -1.0){
      sum += j[key];
    }
  }
//console.log(sum);
// var a = cy.nodes()[j].data(); //.map(fundingtypes); //.reduce(function(a,b){return a + b});
return sum.toLocaleString("fi-FI");
}

function getMaxFunding(){
  var nodes = cy.nodes().length;
  for(var i = 0; i < nodes; i++){
    var a = cy.nodes[i].data().map(fundingtypes);
  }
//  console.log(nodes.data());
}



function moreInfo(j){

  var windowSize = [ "width=200,height=200"];

//  button.innerHTML = $('.newWindow').click(function (event){



 //                   var url = $(this).attr("href");
                    var windowName = "popUp";//$(this).attr("name");
                    var windowSize = windowSize; //Array[$(this).attr("rel")];
 
                    var w = window.open('', windowName, windowSize);
 
// var html = $("#modeltext").html();
 w.document.body.innerHTML = "<p>" + "Rahankäyttö " + j.label + "</p>" 
                           + "<p>" + "Kotisivu " + j.homepage + "</p>";


// w.document.body.innerHTML = toolTipContent(j);
// $(w.document.body).html(html);
                    event.preventDefault();
 
 
 
 //               });

/*

*/

  console.log(j.label);

} // moreInfo()




}); // function

function more(j){
 console.log(j);

 var data = j;
// moreInfo(data);
}


</script>

<style type="text/css">

body{
font: 14px helvetica neue, helvetica, arial, sans-serif;
background-color: white;
}

#cy{
height: 100%;
width: 100%;
  position: absolute;
  left: 50px;
  top: 0;
}

#legend{
position:absolute;
margin: 10px;
left: 30px;
top: 0px;
}

#explanation{
position: absolute;
top: 300px;
font-size: small;
display: block;
width: 250px;
margin: 20px;
}


#legend p{
padding-left: 25px;
}

#legend h3{
font-weight: bold;
}

#legend .kok,
#legend .ps,
#legend .kesk,
#legend .sdp,
#legend .rkp,
#legend .vas,
#legend .vihr
{
position: absolute;
left: -5px;
width: 20px; 
height: 20px;
-moz-border-radius: 50px; 
-webkit-border-radius: 50px; 
border-radius: 40px;
/*border: solid 10px green;*/
/*fill-opacity: .5;*/
}

#legend .kok{
background: #0000FF;
}

#legend .ps{
background: #663300;
}

#legend .kesk{
background: #006600;
}

#legend .sdp{
background: #FF0000;
}

#legend .rkp{
background: #0099FF;
}

#legend .vas{
background: #CC0000;
}

#legend .vihr{
background: #00CC00;
}

.qtip{
max-width: 400px;
}

.qtip-tip{
background-color: #000;
}

.tooltipcontent .leftcolumn{
height: 140px;
width: 60px;
float: left;
}

.tooltipcontent .rightcolumn{
height: 140px;
margin-left: 60px;
width: 300px;
display: block;
}



</style>


</head>

<body>

<div id="cy"></div>

<div id="legend">
<h3>Puolueet</h3>
<div class="kok"></div><p>Kokoomus</p>
<div class="kesk"></div><p>Keskusta</p>
<div class="vihr"></div><p>Vihreä liitto</p>
<div class="sdp"></div><p>Sosialidemokraattinen puolue</p>
<div class="vas"></div><p>Vasemmistoliitto</p>
<div class="ps"></div><p>Perussuomalaiset</p>
<div class="rkp"></div><p>Ruotsalainen kansanpuolue</p>
</div>

<div id="explanation">
Kukin ympyrä edustaa yhtä eurovaaleissa ehdolla ollutta henkilöä joka valittu joko EU-parlamenttiin tai varasijalle.

Ympyröiden halkaisija kuvastaa kuinka paljon rahaa henkilö käytti eurovaalien aikana.

Ympyröitä voi hiiren avulla siirtää toistensa viereen ja tällä tavalla vertailla paljonko rahaa ehdokkaat käyttivät suhteessa toisiinsa.

Kaaret ympyröiden välillä edustavat yhteisiä rahoittajia.

Kun ympyrää klikkaa hiirikursorilla, avautuu kuva jossa näkee mistä lähteistä edustaja sai rahaa ja mihin tarkoituksiin rahaa käytettiin.

</div>
</body>

</html>